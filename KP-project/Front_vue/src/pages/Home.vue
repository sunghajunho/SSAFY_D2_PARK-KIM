<script setup>
import { ref } from 'vue'
import { useThemeStore } from '@/stores/themeStore'
import RecommendedPreview from '@/components/RecommendedPreview.vue'

const query = ref('')
const themeStore = useThemeStore()

// const res = await api.post('/api/recommend/', {
//   input: null  // ë˜ëŠ” ì•„ì˜ˆ ë¹„ì›Œë‘ 
// })
// const recommendations = res.data.results

function search() {
  if (query.value.trim()) {
    window.location.href = `/results?q=${encodeURIComponent(query.value)}`
  }
}
</script>

<template>
  <div class="container text-center mt-5">
    <h1 class="display-4 mb-4 fw-bold">ğŸ¬ MovieGPT</h1>
    <p class="lead text-muted mb-4">GPTì™€ í•¨ê»˜, ë‹¹ì‹ ì˜ ì·¨í–¥ì„ ì½ëŠ” ì˜í™” ì¶”ì²œ</p>

    <div class="input-group input-group-lg mb-5 mx-auto" style="max-width: 600px;">
      <input v-model="query" class="form-control" placeholder="ì˜í™”ë¥¼ ì°¾ì•„ë³´ì„¸ìš”..." />
      <button class="btn btn-primary" @click="search">ê²€ìƒ‰</button>
    </div>

    <RecommendedPreview />

    <div class="mt-5">
      <button class="btn btn-outline-secondary btn-sm" @click="themeStore.toggleTheme">
        ğŸŒ— í…Œë§ˆ ì „í™˜ ({{ themeStore.theme === 'light' ? 'ë¼ì´íŠ¸' : 'ë‹¤í¬' }})
      </button>
    </div>
  </div>
</template>
